<!DOCTYPE html>
<html>
<head>
    <title>Key Access</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .container {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            max-width: 400px;
            width: 100%;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîë Daily Key System</h1>
        <div id="content">üîÑ ƒêang x√°c th·ª±c...</div>
    </div>

    <script>
        async function checkKey() {
            const urlParams = new URLSearchParams(window.location.search);
            const urlKey = urlParams.get('key');
            
            // KI·ªÇM TRA N·∫æU ƒêANG ·ªû LINK4M URL -> KH√îNG REDIRECT N·ªÆA
            if (window.location.href.includes('link4m.co')) {
                document.getElementById('content').innerHTML = '<div style="color:red;">‚ùå Invalid key - Use tool to get new link</div>';
                return;
            }
            
            if (!urlKey) {
                redirectToLink4M();
                return;
            }
            
            try {
                const keyResponse = await fetch('./daily-key.txt');
                const currentKey = (await keyResponse.text()).trim();
                
                if (urlKey !== currentKey) {
                    redirectToLink4M();
                    return;
                }
                
                // KEY H·ª¢P L·ªÜ - HI·ªÇN TH·ªä
                document.getElementById('content').innerHTML = `
                    <div style="font-size:18px; font-weight:bold; color:#333; margin:20px 0; padding:15px; background:#f8f9fa; border-radius:5px; border:2px dashed #667eea;">
                        üîë Today Key: <br>
                        <span style="color:#667eea; font-size:20px;">${currentKey}</span>
                    </div>
                    <button onclick="navigator.clipboard.writeText('${currentKey}').then(() => alert('‚úÖ Copied!'))" 
                            style="padding:10px 20px; background:#667eea; color:white; border:none; border-radius:5px; cursor:pointer;">
                        Copy Key
                    </button>
                `;
                
            } catch (error) {
                document.getElementById('content').innerHTML = '<div style="color:red;">‚ùå Connection error</div>';
            }
        }

        async function redirectToLink4M() {
            try {
                const linkResponse = await fetch('./daily-link.txt');
                let todayLink = await linkResponse.text();
                todayLink = todayLink.trim();
                
                // CH·ªà REDIRECT N·∫æU LINK H·ª¢P L·ªÜ V√Ä KH√îNG PH·∫¢I URL HI·ªÜN T·∫†I
                if (todayLink && todayLink.includes('link4m.co') && todayLink !== window.location.href) {
                    window.location.href = todayLink;
                } else {
                    document.getElementById('content').innerHTML = '<div style="color:red;">‚ùå Invalid access</div>';
                }
            } catch (error) {
                document.getElementById('content').innerHTML = '<div style="color:red;">‚ùå System error</div>';
            }
        }

        checkKey();
    </script>
</body>
</html>
