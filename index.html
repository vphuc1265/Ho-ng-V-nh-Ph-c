<!DOCTYPE html>
<html>
<head>
    <title>Key Access</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .container {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            max-width: 400px;
            width: 100%;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîë Daily Key System</h1>
        <div id="content">üîÑ ƒêang x√°c th·ª±c...</div>
    </div>

    <script>
        async function checkKey() {
            const urlParams = new URLSearchParams(window.location.search);
            const urlKey = urlParams.get('key');
            
            // N·∫æU KH√îNG C√ì KEY HO·∫∂C KEY SAI -> REDIRECT LU√îN
            if (!urlKey || urlKey === '' || urlKey === 'undefined') {
                redirectToLink4M();
                return;
            }
            
            try {
                // L·∫•y key HI·ªÜN T·∫†I t·ª´ server
                const keyResponse = await fetch('./daily-key.txt');
                const currentKey = (await keyResponse.text()).trim();
                
                // KI·ªÇM TRA KEY C√ì KH·ªöP KH√îNG
                if (urlKey !== currentKey) {
                    redirectToLink4M();
                    return;
                }
                
                // Key h·ª£p l·ªá - hi·ªÉn th·ªã
                document.getElementById('content').innerHTML = `
                    <div style="font-size:18px; font-weight:bold; color:#333; margin:20px 0; padding:15px; background:#f8f9fa; border-radius:5px; border:2px dashed #667eea;">
                        üîë Today Key: <br>
                        <span style="color:#667eea; font-size:20px;">${currentKey}</span>
                    </div>
                    <button onclick="navigator.clipboard.writeText('${currentKey}').then(() => alert('‚úÖ Copied!'))" 
                            style="padding:10px 20px; background:#667eea; color:white; border:none; border-radius:5px; cursor:pointer;">
                        Copy Key
                    </button>
                `;
                
            } catch (error) {
                // L·ªói k·∫øt n·ªëi -> redirect
                redirectToLink4M();
            }
        }

        async function redirectToLink4M() {
            try {
                // L·∫•y Link4M link t·ª´ server
                const linkResponse = await fetch('./daily-link.txt');
                const todayLink = (await linkResponse.text()).trim();
                window.location.href = todayLink;
            } catch (error) {
                // Fallback n·∫øu kh√¥ng l·∫•y ƒë∆∞·ª£c link
                window.location.href = 'https://link4m.co/daily-key-today';
            }
        }

        // CH·∫†Y NGAY KHI TRANG LOAD
        checkKey();
    </script>
</body>
</html>
