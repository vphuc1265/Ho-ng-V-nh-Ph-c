<script>
// === SIMPLE WORKING CODE ===
function showKey() {
    const today = new Date();
    const yyyy = today.getFullYear();
    const mm = String(today.getMonth() + 1).padStart(2, '0');
    const dd = String(today.getDate()).padStart(2, '0');
    const dateStr = yyyy + mm + dd;
    
    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
    let randomPart = '';
    for (let i = 0; i < 8; i++) {
        randomPart += chars.charAt(Math.floor(Math.random() * chars.length));
    }
    
    const key = "vphuc_" + dateStr + randomPart;
    
    const tomorrow = new Date(today);
    tomorrow.setDate(tomorrow.getDate() + 1);
    const expires = tomorrow.toLocaleDateString('vi-VN');
    
    document.getElementById('content').innerHTML = `
        <div class="key-section">
            <div class="key-label">üîë Key Tool Ng√†y H√¥m Nay:</div>
            <div class="key-value">${key}</div>
            <button class="copy-btn" onclick="copyKey('${key}')">üìã Copy Key</button>
        </div>
        <div class="expiry">
            ‚è∞ Key c√≥ hi·ªáu l·ª±c ƒë·∫øn: ${expires} 00:00
        </div>
    `;
}

function showError() {
    document.getElementById('content').innerHTML = `
        <div class="no-key">
            <h3>üîë Key Ch·ªâ Hi·ªán Th·ªã 1 L·∫ßn Duy Nh·∫•t Sau Khi V∆∞·ª£t Link</h3>
            <p>Vui L√≤ng V∆∞·ª£t Link Trong Tool ƒê·ªÉ L·∫•y Key !</p>
        </div>
    `;
}

function copyKey(key) {
    navigator.clipboard.writeText(key).then(function() {
        alert('ƒê√£ Copy Key V√†o Clipboard !');
    });
}

// === CHECK URL PARAMETER ===
const urlSearch = window.location.search;
if (urlSearch.includes('key=GET_DAILY_KEY')) {
    showKey();
    // X√≥a parameter
    setTimeout(function() {
        window.history.replaceState({}, '', '/vphuc.luv/');
    }, 1000);
} else {
    showError();
}
</script>
