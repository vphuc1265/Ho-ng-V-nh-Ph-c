<script>
// === SUPER SIMPLE CODE - CH·∫ÆC CH·∫ÆN CH·∫†Y ===
function showKeyPage() {
    var today = new Date();
    var yyyy = today.getFullYear();
    var mm = today.getMonth() + 1;
    var dd = today.getDate();
    if (mm < 10) mm = '0' + mm;
    if (dd < 10) dd = '0' + dd;
    
    var dateStr = yyyy + '' + mm + '' + dd;
    var randomPart = '';
    var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ123456789';
    
    for (var i = 0; i < 8; i++) {
        randomPart += chars.charAt(Math.floor(Math.random() * chars.length));
    }
    
    var key = 'vphuc_' + dateStr + randomPart;
    var tomorrow = new Date(today.getTime() + 86400000);
    var expires = tomorrow.getDate() + '/' + (tomorrow.getMonth() + 1) + '/' + tomorrow.getFullYear();
    
    document.getElementById('content').innerHTML = 
        '<div class="key-section">' +
        '<div class="key-label">üîë Key Tool Ng√†y H√¥m Nay:</div>' +
        '<div class="key-value">' + key + '</div>' +
        '<button class="copy-btn" onclick="copyKey(\'' + key + '\')">üìã Copy Key</button>' +
        '</div>' +
        '<div class="expiry">‚è∞ Key c√≥ hi·ªáu l·ª±c ƒë·∫øn: ' + expires + ' 00:00</div>';
}

function showErrorPage() {
    document.getElementById('content').innerHTML = 
        '<div class="no-key">' +
        '<h3>üîë Key Ch·ªâ Hi·ªán Th·ªã 1 L·∫ßn Duy Nh·∫•t Sau Khi V∆∞·ª£t Link</h3>' +
        '<p>Vui L√≤ng V∆∞·ª£t Link Trong Tool ƒê·ªÉ L·∫•y Key !</p>' +
        '</div>';
}

function copyKey(keyText) {
    navigator.clipboard.writeText(keyText).then(function() {
        alert('ƒê√£ Copy Key V√†o Clipboard !');
    });
}

// === CHECK URL ===
var currentUrl = window.location.href;
if (currentUrl.indexOf('key=GET_DAILY_KEY') > -1) {
    showKeyPage();
    // X√≥a URL parameter sau 1 gi√¢y
    setTimeout(function() {
        var newUrl = window.location.origin + window.location.pathname;
        window.history.replaceState({}, '', newUrl);
    }, 1000);
} else {
    showErrorPage();
}
</script>
