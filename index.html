<script>
// === ANTI-CRACK NÂNG CAO ===
(function(){
    // Chống debugger
    setInterval(function(){
        if(typeof window.Proxy !== 'undefined' && 
           window.Proxy.toString().indexOf('native') === -1) {
            window.location.href = 'about:blank';
        }
    }, 1000);
    
    // Chống HTTP Canary/Fiddler
    if(window.performance && window.performance.timing){
        const loadTime = window.performance.timing.loadEventEnd - window.performance.timing.navigationStart;
        if(loadTime > 10000) {
            document.body.innerHTML = '<h1>Security Violation</h1>';
            return;
        }
    }
    
    // Override console methods
    ['log','info','warn','error'].forEach(method => {
        const original = console[method];
        console[method] = function(...args) {
            if(new Error().stack.includes('debugger')) return;
            original.apply(this, args);
        };
    });
})();

// === VERIFY LINK4M REDIRECT ===
function verifyLink4mReferrer() {
    const referrer = document.referrer;
    if(!referrer.includes('link4m.co') && !referrer.includes('link4m.com')) {
        document.body.innerHTML = '<h1>Access Denied - Use Link4M</h1>';
        return false;
    }
    return true;
}

// Chỉ hiển thị key nếu qua Link4M
if(verifyLink4mReferrer()) {
    // Load key từ daily-key.txt
    fetch('./daily-key.txt').then(r => r.text()).then(key => {
        document.getElementById('key-display').innerText = key;
    });
}
</script>
